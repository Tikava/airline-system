{% extends 'base.html' %}

{% block title %}Register - Airline System App{% endblock %}

{% block content %}
<h1>Register</h1>

<form method="post" class="mt-3 p-4 border rounded bg-light" action="{% url 'flights:register' %}">
    {% csrf_token %}
    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {{ form.non_field_errors }}
        </div>
    {% endif %}

    <div class="mb-3">
        {{ form.username.label_tag }}
        {{ form.username }}
        {{ form.username.errors }}
    </div>

    <div class="mb-3">
        {{ form.email.label_tag }}
        {{ form.email }}
        {{ form.email.errors }}
    </div>

    <div class="mb-3">
        {{ form.password1.label_tag }}
        {{ form.password1 }}
        {{ form.password1.errors }}
    </div>

    <div class="mb-3">
        {{ form.password2.label_tag }}
        {{ form.password2 }}
        {{ form.password2.errors }}
    </div>

    <button type="submit" class="btn btn-success">Register</button>
</form>

<p class="mt-3">Already have an account? <a href="{% url 'flights:login' %}">Log in here</a>.</p>
{% endblock %}


{% block scripts %}
    <script>
        document.querySelector("form").addEventListener("submit", function() {
            const btn = document.getElementById("submit-btn");
            btn.disabled = true;
            btn.innerText = "Registering...";
        });
    </script>
{% endblock %}
